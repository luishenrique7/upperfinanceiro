<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/templates/externa.xhtml">
        <ui:define name="titulo">Upper - Login</ui:define>
        <ui:define name="corpo">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"></link>
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-md-offset-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title"></h3>
                                <img src="http://s19.postimg.org/5flo2t97j/Untitled_1.png" class="img-responsive" alt="" />
                            </div>
                            <div class="panel-body">
                                <!--Conteúdo do painel só será exibido caso ocorra algum erro.-->
                                <h:panelGroup rendered="#{!empty param.login_error}">
                                    <div class="alert alert-danger alert-dismissible fade in" role="alert">
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                        <span class="fa fa-exclamation-triangle"></span>
                                        <span class="sr-only">Error:</span>
                                        <strong>Erro ao autenticar!</strong> #{SPRING_SECURITY_LAST_EXCEPTION.message}
                                    </div>
                                </h:panelGroup>
                                <!--action: aponta para o detino padrão para realizar login do Spring-->
                                <form id="login" method="post" action="#{request.contextPath}/j_spring_security_check">
                                    <div class="form-group">
                                        <!--name tem nomes padronizados pelo Spring Security-->
                                        <input class="form-control input-lg" placeholder="Usuário" name='j_username' type="text" required="true"/>
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control input-lg" placeholder="Senha" name='j_password' type="password" required="true"/>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <!--Permite habilitar o login automático-->
                                            <input type="checkbox" name="_spring_security_remember_me" value="Remember Me"/> Mantenha-me conectado
                                        </label>
                                    </div>
                                    <input class="btn btn-lg btn-primary btn-block" type="submit" value="Login"/>
                                    <br/>
                                    <!--<center><a href="usuario.jsf" data-toggle="tab">Cadastre-se</a></center>-->
                                    <center><a href="recuperarsenha.jsf" data-toggle="tab">Esqueceu sua senha?</a></center>
                                    <script>
                                        //login da última tentativa do login
                                        document.getElementById("login").j_username.value = "#{SPRING_SECURITY_LAST_USERNAME}";
                                    </script>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ui:define>
    </ui:composition>
</html>

